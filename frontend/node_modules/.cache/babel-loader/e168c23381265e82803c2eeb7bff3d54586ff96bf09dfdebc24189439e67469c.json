{"ast":null,"code":"import React,{useState,useEffect}from'react';import axios from'axios';import{withBase}from'../api';import'./ReportPanel.css';import NameInput from'./NameInput';import{useI18n}from'../i18n';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function ReportPanel(){const{t}=useI18n();const year=new Date().getFullYear();const janFirst=\"\".concat(year,\"-01-01\");const today=new Date().toISOString().slice(0,10);const[start,setStart]=useState(janFirst);const[end,setEnd]=useState(today);const[report,setReport]=useState(null);const[search,setSearch]=useState('');const[sectorId,setSectorId]=useState('');const[sectors,setSectors]=useState([]);const[toast,setToast]=useState(null);const[sortConfig,setSortConfig]=useState({key:null,direction:'asc'});const fetchReport=async()=>{if(!start||!end)return;try{const res=await axios.get(withBase(\"/api/report?start=\".concat(start,\"&end=\").concat(end)));setReport(res.data);}catch(err){setToast(t('error_server'));}};useEffect(()=>{if(start&&end)fetchReport();},[start,end]);useEffect(()=>{const fetchSectors=async()=>{try{const res=await axios.get(withBase('/api/sectors'));setSectors(res.data);}catch(err){setToast(t('error_server'));}};fetchSectors();},[]);const handleSort=key=>{let direction='asc';if(sortConfig.key===key&&sortConfig.direction==='asc'){direction='desc';}setSortConfig({key,direction});};const filteredWorkers=(report===null||report===void 0?void 0:report.workers.filter(w=>{const matchesSearch=w.first_name.toLowerCase().includes(search.toLowerCase())||w.last_name.toLowerCase().includes(search.toLowerCase());const matchesSector=sectorId===''||String(w.sector_id)===String(sectorId);return matchesSearch&&matchesSector;}))||[];// Sort filtered workers\nconst sortedWorkers=[...filteredWorkers];if(sortConfig.key){sortedWorkers.sort((a,b)=>{const aValue=getSortValue(a,sortConfig.key);const bValue=getSortValue(b,sortConfig.key);if(aValue<bValue){return sortConfig.direction==='asc'?-1:1;}if(aValue>bValue){return sortConfig.direction==='asc'?1:-1;}return 0;});}function getSortValue(worker,key){const wh=report.workhours.filter(w=>w.worker_id===worker.id);const paga=report.payments.filter(p=>p.worker_id===worker.id&&p.type==='paga');const avanc=report.payments.filter(p=>p.worker_id===worker.id&&p.type==='avanc');const totalHours=wh.reduce((sum,w)=>sum+w.hours,0);const totalPaga=paga.reduce((sum,p)=>sum+p.amount,0);const totalAvanc=avanc.reduce((sum,p)=>sum+p.amount,0);const expected=totalHours*worker.hourly_rate;const balance=totalPaga+totalAvanc-expected;switch(key){case'name':return\"\".concat(worker.first_name,\" \").concat(worker.last_name);case'sector':return worker.sector_name||'';case'hours':return totalHours;case'rate':return worker.hourly_rate;case'paga':return totalPaga;case'avanc':return totalAvanc;case'balance':return balance;default:return'';}}// Calculate totals\nconst totals=sortedWorkers.reduce((acc,worker)=>{const wh=report.workhours.filter(w=>w.worker_id===worker.id);const paga=report.payments.filter(p=>p.worker_id===worker.id&&p.type==='paga');const avanc=report.payments.filter(p=>p.worker_id===worker.id&&p.type==='avanc');acc.totalHours+=wh.reduce((sum,w)=>sum+w.hours,0);acc.totalPaga+=paga.reduce((sum,p)=>sum+p.amount,0);acc.totalAvanc+=avanc.reduce((sum,p)=>sum+p.amount,0);acc.totalExpected+=wh.reduce((sum,w)=>sum+w.hours,0)*worker.hourly_rate;return acc;},{totalHours:0,totalPaga:0,totalAvanc:0,totalExpected:0});const totalBalance=totals.totalPaga+totals.totalAvanc-totals.totalExpected;return/*#__PURE__*/_jsxs(\"div\",{className:\"report-panel\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"report-title\",children:t('general_report_title')}),/*#__PURE__*/_jsxs(\"div\",{className:\"report-header\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"period-info\",children:/*#__PURE__*/_jsxs(\"span\",{children:[t('report_period'),\": \",/*#__PURE__*/_jsx(\"strong\",{children:start}),\" \",t('to'),\" \",/*#__PURE__*/_jsx(\"strong\",{children:end})]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"report-summary\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"summary-item\",children:[/*#__PURE__*/_jsxs(\"span\",{className:\"summary-label\",children:[t('total_hours'),\":\"]}),/*#__PURE__*/_jsx(\"span\",{className:\"summary-value\",children:totals.totalHours})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"summary-item\",children:[/*#__PURE__*/_jsxs(\"span\",{className:\"summary-label\",children:[t('total_payments'),\":\"]}),/*#__PURE__*/_jsxs(\"span\",{className:\"summary-value\",children:[totals.totalPaga.toFixed(2),\" \\u20AC\"]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"summary-item\",children:[/*#__PURE__*/_jsxs(\"span\",{className:\"summary-label\",children:[t('total_advances'),\":\"]}),/*#__PURE__*/_jsxs(\"span\",{className:\"summary-value\",children:[totals.totalAvanc.toFixed(2),\" \\u20AC\"]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"summary-item\",children:[/*#__PURE__*/_jsxs(\"span\",{className:\"summary-label\",children:[t('total_balance'),\":\"]}),/*#__PURE__*/_jsxs(\"span\",{className:\"summary-value \".concat(totalBalance>=0?'positive':'negative'),children:[totalBalance.toFixed(2),\" \\u20AC\"]})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"report-controls\",children:[/*#__PURE__*/_jsx(NameInput,{type:\"date\",name:\"start\",value:start,onChange:e=>setStart(e.target.value),required:true}),/*#__PURE__*/_jsx(NameInput,{type:\"date\",name:\"end\",value:end,onChange:e=>setEnd(e.target.value),required:true}),/*#__PURE__*/_jsxs(\"div\",{className:\"filter-controls\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"filter-group\",children:[/*#__PURE__*/_jsxs(\"label\",{children:[t('sector'),\":\"]}),/*#__PURE__*/_jsxs(\"select\",{value:sectorId,onChange:e=>setSectorId(e.target.value),className:\"report-sector-dropdown\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:t('all_sectors')}),sectors.map(sector=>/*#__PURE__*/_jsx(\"option\",{value:sector.id,children:sector.name},sector.id))]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"filter-group\",children:[/*#__PURE__*/_jsxs(\"label\",{children:[t('search'),\":\"]}),/*#__PURE__*/_jsx(NameInput,{name:\"search\",value:search,onChange:e=>setSearch(e.target.value),placeholder:t('name_or_surname_placeholder'),className:\"report-search\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"action-buttons\",children:[/*#__PURE__*/_jsxs(\"button\",{className:\"report-btn-main\",onClick:fetchReport,children:[/*#__PURE__*/_jsx(\"svg\",{width:\"16\",height:\"16\",fill:\"currentColor\",viewBox:\"0 0 16 16\",children:/*#__PURE__*/_jsx(\"path\",{d:\"M11.742 10.344a6.5 6.5 0 1 0-1.397 1.398h-.001c.03.04.062.078.098.115l3.85 3.85a1 1 0 0 0 1.415-1.414l-3.85-3.85a1.007 1.007 0 0 0-.115-.1zM12 6.5a5.5 5.5 0 1 1-11 0 5.5 5.5 0 0 1 11 0z\"})}),t('show_report')]}),report&&/*#__PURE__*/_jsxs(\"button\",{className:\"report-btn-print\",onClick:()=>window.print(),children:[/*#__PURE__*/_jsxs(\"svg\",{width:\"16\",height:\"16\",fill:\"currentColor\",viewBox:\"0 0 16 16\",children:[/*#__PURE__*/_jsx(\"path\",{d:\"M5 1a2 2 0 0 0-2 2v1h10V3a2 2 0 0 0-2-2H5zm6 8H5a1 1 0 0 0-1 1v3a1 1 0 0 0 1 1h6a1 1 0 0 0 1-1v-3a1 1 0 0 0-1-1z\"}),/*#__PURE__*/_jsx(\"path\",{d:\"M0 7a2 2 0 0 1 2-2h12a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2h-1v-2a2 2 0 0 0-2-2H5a2 2 0 0 0-2 2v2H2a2 2 0 0 1-2-2V7zm2.5 1a.5.5 0 1 0 0-1 .5.5 0 0 0 0 1z\"})]}),t('print')]})]})]}),report&&/*#__PURE__*/_jsx(\"div\",{className:\"report-table-wrapper\",children:/*#__PURE__*/_jsxs(\"table\",{className:\"report-table\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsxs(\"th\",{onClick:()=>handleSort('name'),className:\"sortable\",children:[t('name_col'),\" \",sortConfig.key==='name'&&(sortConfig.direction==='asc'?'↑':'↓')]}),/*#__PURE__*/_jsxs(\"th\",{onClick:()=>handleSort('sector'),className:\"sortable\",children:[t('sector'),\" \",sortConfig.key==='sector'&&(sortConfig.direction==='asc'?'↑':'↓')]}),/*#__PURE__*/_jsxs(\"th\",{onClick:()=>handleSort('hours'),className:\"sortable\",children:[t('hours'),\" \",sortConfig.key==='hours'&&(sortConfig.direction==='asc'?'↑':'↓')]}),/*#__PURE__*/_jsxs(\"th\",{onClick:()=>handleSort('rate'),className:\"sortable\",children:[t('hourly_rate'),\" \",sortConfig.key==='rate'&&(sortConfig.direction==='asc'?'↑':'↓')]}),/*#__PURE__*/_jsxs(\"th\",{onClick:()=>handleSort('paga'),className:\"sortable\",children:[t('paga'),\" \",sortConfig.key==='paga'&&(sortConfig.direction==='asc'?'↑':'↓')]}),/*#__PURE__*/_jsxs(\"th\",{onClick:()=>handleSort('avanc'),className:\"sortable\",children:[t('avanc_plural'),\" \",sortConfig.key==='avanc'&&(sortConfig.direction==='asc'?'↑':'↓')]}),/*#__PURE__*/_jsxs(\"th\",{onClick:()=>handleSort('balance'),className:\"sortable\",children:[t('balance'),\" \",sortConfig.key==='balance'&&(sortConfig.direction==='asc'?'↑':'↓')]}),/*#__PURE__*/_jsx(\"th\",{children:t('agent')})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:sortedWorkers.map(worker=>{const wh=report.workhours.filter(w=>w.worker_id===worker.id);const paga=report.payments.filter(p=>p.worker_id===worker.id&&p.type==='paga');const avanc=report.payments.filter(p=>p.worker_id===worker.id&&p.type==='avanc');const totalHours=wh.reduce((sum,w)=>sum+w.hours,0);const totalPaga=paga.reduce((sum,p)=>sum+p.amount,0);const totalAvanc=avanc.reduce((sum,p)=>sum+p.amount,0);const expected=totalHours*worker.hourly_rate;const balance=totalPaga+totalAvanc-expected;return/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsxs(\"td\",{className:\"worker-name\",children:[worker.first_name,\" \",worker.last_name]}),/*#__PURE__*/_jsx(\"td\",{children:worker.sector_name||'-'}),/*#__PURE__*/_jsx(\"td\",{children:totalHours}),/*#__PURE__*/_jsxs(\"td\",{children:[worker.hourly_rate,\" \\u20AC\"]}),/*#__PURE__*/_jsxs(\"td\",{children:[totalPaga.toFixed(2),\" \\u20AC\"]}),/*#__PURE__*/_jsxs(\"td\",{children:[totalAvanc.toFixed(2),\" \\u20AC\"]}),/*#__PURE__*/_jsxs(\"td\",{className:balance>=0?'positive':'negative',children:[balance.toFixed(2),\" \\u20AC\"]}),/*#__PURE__*/_jsx(\"td\",{style:{fontSize:'0.6rem',fontWeight:600,color:'#dc2626'},children:worker.created_by||'-'})]},worker.id);})}),/*#__PURE__*/_jsx(\"tfoot\",{children:/*#__PURE__*/_jsxs(\"tr\",{className:\"table-totals\",children:[/*#__PURE__*/_jsxs(\"td\",{colSpan:\"2\",children:[t('total'),\":\"]}),/*#__PURE__*/_jsx(\"td\",{children:totals.totalHours}),/*#__PURE__*/_jsx(\"td\",{children:\"-\"}),/*#__PURE__*/_jsxs(\"td\",{children:[totals.totalPaga.toFixed(2),\" \\u20AC\"]}),/*#__PURE__*/_jsxs(\"td\",{children:[totals.totalAvanc.toFixed(2),\" \\u20AC\"]}),/*#__PURE__*/_jsxs(\"td\",{className:totalBalance>=0?'positive':'negative',children:[totalBalance.toFixed(2),\" \\u20AC\"]}),/*#__PURE__*/_jsx(\"td\",{children:\"-\"})]})})]})}),toast&&/*#__PURE__*/_jsxs(\"div\",{className:\"report-toast\",onClick:()=>setToast(null),children:[toast,/*#__PURE__*/_jsx(\"span\",{className:\"toast-close\",children:\"\\u2715\"})]})]});}export default ReportPanel;","map":{"version":3,"names":["React","useState","useEffect","axios","withBase","NameInput","useI18n","jsx","_jsx","jsxs","_jsxs","ReportPanel","t","year","Date","getFullYear","janFirst","concat","today","toISOString","slice","start","setStart","end","setEnd","report","setReport","search","setSearch","sectorId","setSectorId","sectors","setSectors","toast","setToast","sortConfig","setSortConfig","key","direction","fetchReport","res","get","data","err","fetchSectors","handleSort","filteredWorkers","workers","filter","w","matchesSearch","first_name","toLowerCase","includes","last_name","matchesSector","String","sector_id","sortedWorkers","sort","a","b","aValue","getSortValue","bValue","worker","wh","workhours","worker_id","id","paga","payments","p","type","avanc","totalHours","reduce","sum","hours","totalPaga","amount","totalAvanc","expected","hourly_rate","balance","sector_name","totals","acc","totalExpected","totalBalance","className","children","toFixed","name","value","onChange","e","target","required","map","sector","placeholder","onClick","width","height","fill","viewBox","d","window","print","style","fontSize","fontWeight","color","created_by","colSpan"],"sources":["C:/Users/Admin/Desktop/enisi/frontend/src/components/ReportPanel.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport axios from 'axios';\r\nimport { withBase } from '../api';\r\nimport './ReportPanel.css';\r\nimport NameInput from './NameInput';\r\nimport { useI18n } from '../i18n';\r\n\r\nfunction ReportPanel() {\r\n  const { t } = useI18n();\r\n  const year = new Date().getFullYear();\r\n  const janFirst = `${year}-01-01`;\r\n  const today = new Date().toISOString().slice(0, 10);\r\n  const [start, setStart] = useState(janFirst);\r\n  const [end, setEnd] = useState(today);\r\n  const [report, setReport] = useState(null);\r\n  const [search, setSearch] = useState('');\r\n  const [sectorId, setSectorId] = useState('');\r\n  const [sectors, setSectors] = useState([]);\r\n  const [toast, setToast] = useState(null);\r\n  const [sortConfig, setSortConfig] = useState({ key: null, direction: 'asc' });\r\n\r\n  const fetchReport = async () => {\r\n    if (!start || !end) return;\r\n    try {\r\n  const res = await axios.get(withBase(`/api/report?start=${start}&end=${end}`));\r\n      setReport(res.data);\r\n    } catch (err) {\r\n  setToast(t('error_server'));\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    if (start && end) fetchReport();\r\n  }, [start, end]);\r\n\r\n  useEffect(() => {\r\n    const fetchSectors = async () => {\r\n      try {\r\n  const res = await axios.get(withBase('/api/sectors'));\r\n        setSectors(res.data);\r\n      } catch (err) {\r\n  setToast(t('error_server'));\r\n      }\r\n    };\r\n    fetchSectors();\r\n  }, []);\r\n\r\n  const handleSort = (key) => {\r\n    let direction = 'asc';\r\n    if (sortConfig.key === key && sortConfig.direction === 'asc') {\r\n      direction = 'desc';\r\n    }\r\n    setSortConfig({ key, direction });\r\n  };\r\n\r\n  const filteredWorkers = report?.workers.filter(w => {\r\n    const matchesSearch =\r\n      w.first_name.toLowerCase().includes(search.toLowerCase()) ||\r\n      w.last_name.toLowerCase().includes(search.toLowerCase());\r\n    const matchesSector = sectorId === '' || String(w.sector_id) === String(sectorId);\r\n    return matchesSearch && matchesSector;\r\n  }) || [];\r\n\r\n  // Sort filtered workers\r\n  const sortedWorkers = [...filteredWorkers];\r\n  if (sortConfig.key) {\r\n    sortedWorkers.sort((a, b) => {\r\n      const aValue = getSortValue(a, sortConfig.key);\r\n      const bValue = getSortValue(b, sortConfig.key);\r\n      \r\n      if (aValue < bValue) {\r\n        return sortConfig.direction === 'asc' ? -1 : 1;\r\n      }\r\n      if (aValue > bValue) {\r\n        return sortConfig.direction === 'asc' ? 1 : -1;\r\n      }\r\n      return 0;\r\n    });\r\n  }\r\n\r\n  function getSortValue(worker, key) {\r\n    const wh = report.workhours.filter(w => w.worker_id === worker.id);\r\n    const paga = report.payments.filter(p => p.worker_id === worker.id && p.type === 'paga');\r\n    const avanc = report.payments.filter(p => p.worker_id === worker.id && p.type === 'avanc');\r\n    const totalHours = wh.reduce((sum, w) => sum + w.hours, 0);\r\n    const totalPaga = paga.reduce((sum, p) => sum + p.amount, 0);\r\n    const totalAvanc = avanc.reduce((sum, p) => sum + p.amount, 0);\r\n    const expected = totalHours * worker.hourly_rate;\r\n    const balance = totalPaga + totalAvanc - expected;\r\n\r\n    switch(key) {\r\n      case 'name': return `${worker.first_name} ${worker.last_name}`;\r\n      case 'sector': return worker.sector_name || '';\r\n      case 'hours': return totalHours;\r\n      case 'rate': return worker.hourly_rate;\r\n      case 'paga': return totalPaga;\r\n      case 'avanc': return totalAvanc;\r\n      case 'balance': return balance;\r\n      default: return '';\r\n    }\r\n  }\r\n\r\n  // Calculate totals\r\n  const totals = sortedWorkers.reduce((acc, worker) => {\r\n    const wh = report.workhours.filter(w => w.worker_id === worker.id);\r\n    const paga = report.payments.filter(p => p.worker_id === worker.id && p.type === 'paga');\r\n    const avanc = report.payments.filter(p => p.worker_id === worker.id && p.type === 'avanc');\r\n    \r\n    acc.totalHours += wh.reduce((sum, w) => sum + w.hours, 0);\r\n    acc.totalPaga += paga.reduce((sum, p) => sum + p.amount, 0);\r\n    acc.totalAvanc += avanc.reduce((sum, p) => sum + p.amount, 0);\r\n    acc.totalExpected += wh.reduce((sum, w) => sum + w.hours, 0) * worker.hourly_rate;\r\n    \r\n    return acc;\r\n  }, { totalHours: 0, totalPaga: 0, totalAvanc: 0, totalExpected: 0 });\r\n\r\n  const totalBalance = totals.totalPaga + totals.totalAvanc - totals.totalExpected;\r\n\r\n  return (\r\n    <div className=\"report-panel\">\r\n  <h2 className=\"report-title\">{t('general_report_title')}</h2>\r\n      \r\n      <div className=\"report-header\">\r\n        <div className=\"period-info\">\r\n          <span>{t('report_period')}: <strong>{start}</strong> {t('to')} <strong>{end}</strong></span>\r\n        </div>\r\n        <div className=\"report-summary\">\r\n          <div className=\"summary-item\">\r\n            <span className=\"summary-label\">{t('total_hours')}:</span>\r\n            <span className=\"summary-value\">{totals.totalHours}</span>\r\n          </div>\r\n          <div className=\"summary-item\">\r\n            <span className=\"summary-label\">{t('total_payments')}:</span>\r\n            <span className=\"summary-value\">{totals.totalPaga.toFixed(2)} €</span>\r\n          </div>\r\n          <div className=\"summary-item\">\r\n            <span className=\"summary-label\">{t('total_advances')}:</span>\r\n            <span className=\"summary-value\">{totals.totalAvanc.toFixed(2)} €</span>\r\n          </div>\r\n          <div className=\"summary-item\">\r\n            <span className=\"summary-label\">{t('total_balance')}:</span>\r\n            <span className={`summary-value ${totalBalance >= 0 ? 'positive' : 'negative'}`}>\r\n              {totalBalance.toFixed(2)} €\r\n            </span>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      <div className=\"report-controls\">\r\n        <NameInput type=\"date\" name=\"start\" value={start} onChange={e => setStart(e.target.value)} required />\r\n        <NameInput type=\"date\" name=\"end\" value={end} onChange={e => setEnd(e.target.value)} required />\r\n        \r\n        <div className=\"filter-controls\">\r\n          <div className=\"filter-group\">\r\n            <label>{t('sector')}:</label>\r\n            <select value={sectorId} onChange={e => setSectorId(e.target.value)} className=\"report-sector-dropdown\">\r\n              <option value=\"\">{t('all_sectors')}</option>\r\n              {sectors.map(sector => (\r\n                <option key={sector.id} value={sector.id}>{sector.name}</option>\r\n              ))}\r\n            </select>\r\n          </div>\r\n          \r\n          <div className=\"filter-group\">\r\n            <label>{t('search')}:</label>\r\n            <NameInput\r\n              name=\"search\"\r\n              value={search}\r\n              onChange={e => setSearch(e.target.value)}\r\n              placeholder={t('name_or_surname_placeholder')}\r\n              className=\"report-search\"\r\n            />\r\n          </div>\r\n        </div>\r\n        \r\n        <div className=\"action-buttons\">\r\n          <button className=\"report-btn-main\" onClick={fetchReport}>\r\n            <svg width=\"16\" height=\"16\" fill=\"currentColor\" viewBox=\"0 0 16 16\">\r\n              <path d=\"M11.742 10.344a6.5 6.5 0 1 0-1.397 1.398h-.001c.03.04.062.078.098.115l3.85 3.85a1 1 0 0 0 1.415-1.414l-3.85-3.85a1.007 1.007 0 0 0-.115-.1zM12 6.5a5.5 5.5 0 1 1-11 0 5.5 5.5 0 0 1 11 0z\"/>\r\n            </svg>\r\n            {t('show_report')}\r\n          </button>\r\n          \r\n          {report && (\r\n            <button className=\"report-btn-print\" onClick={() => window.print()}>\r\n              <svg width=\"16\" height=\"16\" fill=\"currentColor\" viewBox=\"0 0 16 16\">\r\n                <path d=\"M5 1a2 2 0 0 0-2 2v1h10V3a2 2 0 0 0-2-2H5zm6 8H5a1 1 0 0 0-1 1v3a1 1 0 0 0 1 1h6a1 1 0 0 0 1-1v-3a1 1 0 0 0-1-1z\"/>\r\n                <path d=\"M0 7a2 2 0 0 1 2-2h12a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2h-1v-2a2 2 0 0 0-2-2H5a2 2 0 0 0-2 2v2H2a2 2 0 0 1-2-2V7zm2.5 1a.5.5 0 1 0 0-1 .5.5 0 0 0 0 1z\"/>\r\n              </svg>\r\n              {t('print')}\r\n            </button>\r\n          )}\r\n        </div>\r\n      </div>\r\n\r\n      {report && (\r\n        <div className=\"report-table-wrapper\">\r\n          <table className=\"report-table\">\r\n            <thead>\r\n              <tr>\r\n                <th onClick={() => handleSort('name')} className=\"sortable\">\r\n                  {t('name_col')} {sortConfig.key === 'name' && (sortConfig.direction === 'asc' ? '↑' : '↓')}\r\n                </th>\r\n                <th onClick={() => handleSort('sector')} className=\"sortable\">\r\n                  {t('sector')} {sortConfig.key === 'sector' && (sortConfig.direction === 'asc' ? '↑' : '↓')}\r\n                </th>\r\n                <th onClick={() => handleSort('hours')} className=\"sortable\">\r\n                  {t('hours')} {sortConfig.key === 'hours' && (sortConfig.direction === 'asc' ? '↑' : '↓')}\r\n                </th>\r\n                <th onClick={() => handleSort('rate')} className=\"sortable\">\r\n                  {t('hourly_rate')} {sortConfig.key === 'rate' && (sortConfig.direction === 'asc' ? '↑' : '↓')}\r\n                </th>\r\n                <th onClick={() => handleSort('paga')} className=\"sortable\">\r\n                  {t('paga')} {sortConfig.key === 'paga' && (sortConfig.direction === 'asc' ? '↑' : '↓')}\r\n                </th>\r\n                <th onClick={() => handleSort('avanc')} className=\"sortable\">\r\n                  {t('avanc_plural')} {sortConfig.key === 'avanc' && (sortConfig.direction === 'asc' ? '↑' : '↓')}\r\n                </th>\r\n                <th onClick={() => handleSort('balance')} className=\"sortable\">\r\n                  {t('balance')} {sortConfig.key === 'balance' && (sortConfig.direction === 'asc' ? '↑' : '↓')}\r\n                </th>\r\n                <th>{t('agent')}</th>\r\n              </tr>\r\n            </thead>\r\n            <tbody>\r\n              {sortedWorkers.map(worker => {\r\n                const wh = report.workhours.filter(w => w.worker_id === worker.id);\r\n                const paga = report.payments.filter(p => p.worker_id === worker.id && p.type === 'paga');\r\n                const avanc = report.payments.filter(p => p.worker_id === worker.id && p.type === 'avanc');\r\n                const totalHours = wh.reduce((sum, w) => sum + w.hours, 0);\r\n                const totalPaga = paga.reduce((sum, p) => sum + p.amount, 0);\r\n                const totalAvanc = avanc.reduce((sum, p) => sum + p.amount, 0);\r\n                const expected = totalHours * worker.hourly_rate;\r\n                const balance = totalPaga + totalAvanc - expected;\r\n                \r\n                return (\r\n                  <tr key={worker.id}>\r\n                    <td className=\"worker-name\">{worker.first_name} {worker.last_name}</td>\r\n                    <td>{worker.sector_name || '-'}</td>\r\n                    <td>{totalHours}</td>\r\n                    <td>{worker.hourly_rate} €</td>\r\n                    <td>{totalPaga.toFixed(2)} €</td>\r\n                    <td>{totalAvanc.toFixed(2)} €</td>\r\n                    <td className={balance >= 0 ? 'positive' : 'negative'}>{balance.toFixed(2)} €</td>\r\n                    <td style={{fontSize:'0.6rem',fontWeight:600,color:'#dc2626'}}>{worker.created_by || '-'}</td>\r\n                  </tr>\r\n                );\r\n              })}\r\n            </tbody>\r\n            <tfoot>\r\n              <tr className=\"table-totals\">\r\n                <td colSpan=\"2\">{t('total')}:</td>\r\n                <td>{totals.totalHours}</td>\r\n                <td>-</td>\r\n                <td>{totals.totalPaga.toFixed(2)} €</td>\r\n                <td>{totals.totalAvanc.toFixed(2)} €</td>\r\n                <td className={totalBalance >= 0 ? 'positive' : 'negative'}>{totalBalance.toFixed(2)} €</td>\r\n                <td>-</td>\r\n              </tr>\r\n            </tfoot>\r\n          </table>\r\n        </div>\r\n      )}\r\n      \r\n      {toast && (\r\n        <div className=\"report-toast\" onClick={() => setToast(null)}>\r\n          {toast}\r\n          <span className=\"toast-close\">✕</span>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default ReportPanel;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}