{"ast":null,"code":"import React,{useState,useEffect}from'react';import axios from'axios';import{withBase}from'../api';import'./SectorPanel.css';import NameInput from'./NameInput';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function SectorPanel(){const[sectors,setSectors]=useState([]);const[name,setName]=useState('');const[toast,setToast]=useState(null);useEffect(()=>{fetchSectors();},[]);const fetchSectors=async()=>{try{const res=await axios.get(withBase('/api/sectors'));setSectors(res.data);}catch(err){setToast('Gabim në lidhje me serverin!');}};const handleSubmit=async e=>{e.preventDefault();try{await axios.post(withBase('/api/sectors'),{name});setToast('Sektori u shtua!');setName('');fetchSectors();}catch(err){setToast('Sektori ekziston!');}};const handleDelete=async id=>{try{await axios.delete(withBase(\"/api/sectors/\".concat(id)));setToast('Sektori u fshi!');fetchSectors();}catch(err){setToast('Gabim gjatë fshirjes!');}};return/*#__PURE__*/_jsxs(\"div\",{className:\"sector-panel\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"sector-title\",children:\"Regjistrimi i Sektor\\xEBve\"}),/*#__PURE__*/_jsxs(\"form\",{className:\"sector-form\",onSubmit:handleSubmit,children:[/*#__PURE__*/_jsx(NameInput,{name:\"sector_name\",value:name,onChange:e=>setName(e.target.value),placeholder:\"Emri i sektorit\",required:true}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"sector-btn-main\",children:\"Shto Sektorin\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"sector-table-wrapper\",children:/*#__PURE__*/_jsxs(\"table\",{className:\"table sector-table\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"Emri i Sektorit\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Veprime\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:sectors.map(sector=>/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:sector.name}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(\"button\",{className:\"sector-btn-delete\",onClick:()=>handleDelete(sector.id),children:\"Fshij\"})})]},sector.id))})]})}),toast&&/*#__PURE__*/_jsx(\"div\",{className:\"sector-toast\",onClick:()=>setToast(null),children:toast})]});}export default SectorPanel;","map":{"version":3,"names":["React","useState","useEffect","axios","withBase","NameInput","jsx","_jsx","jsxs","_jsxs","SectorPanel","sectors","setSectors","name","setName","toast","setToast","fetchSectors","res","get","data","err","handleSubmit","e","preventDefault","post","handleDelete","id","delete","concat","className","children","onSubmit","value","onChange","target","placeholder","required","type","map","sector","onClick"],"sources":["C:/Users/Admin/Desktop/enisi/frontend/src/components/SectorPanel.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport axios from 'axios';\r\nimport { withBase } from '../api';\r\nimport './SectorPanel.css';\r\nimport NameInput from './NameInput';\r\n\r\nfunction SectorPanel() {\r\n  const [sectors, setSectors] = useState([]);\r\n  const [name, setName] = useState('');\r\n  const [toast, setToast] = useState(null);\r\n\r\n  useEffect(() => {\r\n    fetchSectors();\r\n  }, []);\r\n\r\n  const fetchSectors = async () => {\r\n    try {\r\n  const res = await axios.get(withBase('/api/sectors'));\r\n      setSectors(res.data);\r\n    } catch (err) {\r\n      setToast('Gabim në lidhje me serverin!');\r\n    }\r\n  };\r\n\r\n  const handleSubmit = async e => {\r\n    e.preventDefault();\r\n    try {\r\n  await axios.post(withBase('/api/sectors'), { name });\r\n      setToast('Sektori u shtua!');\r\n      setName('');\r\n      fetchSectors();\r\n    } catch (err) {\r\n      setToast('Sektori ekziston!');\r\n    }\r\n  };\r\n\r\n  const handleDelete = async id => {\r\n    try {\r\n  await axios.delete(withBase(`/api/sectors/${id}`));\r\n      setToast('Sektori u fshi!');\r\n      fetchSectors();\r\n    } catch (err) {\r\n      setToast('Gabim gjatë fshirjes!');\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"sector-panel\">\r\n      <h2 className=\"sector-title\">Regjistrimi i Sektorëve</h2>\r\n      <form className=\"sector-form\" onSubmit={handleSubmit}>\r\n        <NameInput\r\n          name=\"sector_name\"\r\n          value={name}\r\n          onChange={e => setName(e.target.value)}\r\n          placeholder=\"Emri i sektorit\"\r\n          required\r\n        />\r\n        <button type=\"submit\" className=\"sector-btn-main\">Shto Sektorin</button>\r\n      </form>\r\n      <div className=\"sector-table-wrapper\">\r\n        <table className=\"table sector-table\">\r\n          <thead>\r\n            <tr>\r\n              <th>Emri i Sektorit</th>\r\n              <th>Veprime</th>\r\n            </tr>\r\n          </thead>\r\n          <tbody>\r\n            {sectors.map(sector => (\r\n              <tr key={sector.id}>\r\n                <td>{sector.name}</td>\r\n                <td>\r\n                  <button className=\"sector-btn-delete\" onClick={() => handleDelete(sector.id)}>Fshij</button>\r\n                </td>\r\n              </tr>\r\n            ))}\r\n          </tbody>\r\n        </table>\r\n      </div>\r\n      {toast && <div className=\"sector-toast\" onClick={() => setToast(null)}>{toast}</div>}\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default SectorPanel;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}