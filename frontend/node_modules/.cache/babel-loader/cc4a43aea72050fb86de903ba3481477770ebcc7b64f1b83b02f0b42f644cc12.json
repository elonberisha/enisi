{"ast":null,"code":"import React,{useState,useEffect}from'react';import axios from'axios';import{withBase}from'../api';import'./SectorPanel.css';import NameInput from'./NameInput';import{useI18n}from'../i18n';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function SectorPanel(){const{t}=useI18n();const[sectors,setSectors]=useState([]);const[name,setName]=useState('');const[toast,setToast]=useState(null);useEffect(()=>{fetchSectors();},[]);const fetchSectors=async()=>{try{const res=await axios.get(withBase('/api/sectors'));setSectors(res.data);}catch(err){setToast(t('error_server'));}};const handleSubmit=async e=>{e.preventDefault();try{await axios.post(withBase('/api/sectors'),{name});setToast(t('created_success'));setName('');fetchSectors();}catch(err){setToast(t('sector_exists'));}};const handleDelete=async id=>{try{await axios.delete(withBase(\"/api/sectors/\".concat(id)));setToast(t('deleted_success'));fetchSectors();}catch(err){setToast(t('error_delete'));}};return/*#__PURE__*/_jsxs(\"div\",{className:\"sector-panel\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"sector-title\",children:t('sectors_title')}),/*#__PURE__*/_jsxs(\"form\",{className:\"sector-form\",onSubmit:handleSubmit,children:[/*#__PURE__*/_jsx(NameInput,{name:\"sector_name\",value:name,onChange:e=>setName(e.target.value),placeholder:t('sector_name_placeholder'),required:true}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"sector-btn-main\",children:t('btn_add_sector')})]}),/*#__PURE__*/_jsx(\"div\",{className:\"sector-table-wrapper\",children:/*#__PURE__*/_jsxs(\"table\",{className:\"table sector-table\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:t('sector_name_col')}),/*#__PURE__*/_jsx(\"th\",{children:t('agent')}),/*#__PURE__*/_jsx(\"th\",{children:t('actions')})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:sectors.map(sector=>/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:sector.name}),/*#__PURE__*/_jsx(\"td\",{style:{fontSize:'0.65rem',fontWeight:600,color:'#dc2626'},children:sector.created_by||'-'}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(\"button\",{className:\"sector-btn-delete\",onClick:()=>handleDelete(sector.id),children:t('delete')})})]},sector.id))})]})}),toast&&/*#__PURE__*/_jsx(\"div\",{className:\"sector-toast\",onClick:()=>setToast(null),children:toast})]});}export default SectorPanel;","map":{"version":3,"names":["React","useState","useEffect","axios","withBase","NameInput","useI18n","jsx","_jsx","jsxs","_jsxs","SectorPanel","t","sectors","setSectors","name","setName","toast","setToast","fetchSectors","res","get","data","err","handleSubmit","e","preventDefault","post","handleDelete","id","delete","concat","className","children","onSubmit","value","onChange","target","placeholder","required","type","map","sector","style","fontSize","fontWeight","color","created_by","onClick"],"sources":["C:/Users/Admin/Desktop/enisi/frontend/src/components/SectorPanel.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport axios from 'axios';\r\nimport { withBase } from '../api';\r\nimport './SectorPanel.css';\r\nimport NameInput from './NameInput';\r\nimport { useI18n } from '../i18n';\r\n\r\nfunction SectorPanel() {\r\n  const { t } = useI18n();\r\n  const [sectors, setSectors] = useState([]);\r\n  const [name, setName] = useState('');\r\n  const [toast, setToast] = useState(null);\r\n\r\n  useEffect(() => {\r\n    fetchSectors();\r\n  }, []);\r\n\r\n  const fetchSectors = async () => {\r\n    try {\r\n  const res = await axios.get(withBase('/api/sectors'));\r\n      setSectors(res.data);\r\n    } catch (err) {\r\n      setToast(t('error_server'));\r\n    }\r\n  };\r\n\r\n  const handleSubmit = async e => {\r\n    e.preventDefault();\r\n    try {\r\n      await axios.post(withBase('/api/sectors'), { name });\r\n      setToast(t('created_success'));\r\n      setName('');\r\n      fetchSectors();\r\n    } catch (err) {\r\n      setToast(t('sector_exists'));\r\n    }\r\n  };\r\n\r\n  const handleDelete = async id => {\r\n    try {\r\n      await axios.delete(withBase(`/api/sectors/${id}`));\r\n      setToast(t('deleted_success'));\r\n      fetchSectors();\r\n    } catch (err) {\r\n      setToast(t('error_delete'));\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"sector-panel\">\r\n  <h2 className=\"sector-title\">{t('sectors_title')}</h2>\r\n      <form className=\"sector-form\" onSubmit={handleSubmit}>\r\n        <NameInput\r\n          name=\"sector_name\"\r\n          value={name}\r\n          onChange={e => setName(e.target.value)}\r\n          placeholder={t('sector_name_placeholder')}\r\n          required\r\n        />\r\n  <button type=\"submit\" className=\"sector-btn-main\">{t('btn_add_sector')}</button>\r\n      </form>\r\n      <div className=\"sector-table-wrapper\">\r\n        <table className=\"table sector-table\">\r\n          <thead>\r\n            <tr>\r\n              <th>{t('sector_name_col')}</th>\r\n              <th>{t('agent')}</th>\r\n              <th>{t('actions')}</th>\r\n            </tr>\r\n          </thead>\r\n          <tbody>\r\n            {sectors.map(sector => (\r\n              <tr key={sector.id}>\r\n                <td>{sector.name}</td>\r\n                <td style={{fontSize:'0.65rem',fontWeight:600,color:'#dc2626'}}>{sector.created_by || '-'}</td>\r\n                <td>\r\n                  <button className=\"sector-btn-delete\" onClick={() => handleDelete(sector.id)}>{t('delete')}</button>\r\n                </td>\r\n              </tr>\r\n            ))}\r\n          </tbody>\r\n        </table>\r\n      </div>\r\n      {toast && <div className=\"sector-toast\" onClick={() => setToast(null)}>{toast}</div>}\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default SectorPanel;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}